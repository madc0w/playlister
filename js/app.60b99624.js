(function(){"use strict";var t={4160:function(t,e,n){var r=n(5130),i=n(6768),o=n(4232);const a={id:"app"},l={id:"left-panel"},s={key:0,id:"playlist-container"},u={class:"track-title"},c={class:"track-artist"},p={id:"right-panel"},d={key:0,id:"error"},h={id:"input-panel"},y={key:0,id:"working-label"},f={key:1};function g(t,e,n,g,v,k){return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.Lk)("div",l,[e[4]||(e[4]=(0,i.Lk)("div",{class:"header"},"Playlist",-1)),e[5]||(e[5]=(0,i.Lk)("hr",null,null,-1)),v.playlist?((0,i.uX)(),(0,i.CE)("div",s,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(v.playlist,((t,e)=>((0,i.uX)(),(0,i.CE)("div",{key:e},[(0,i.Lk)("div",u,(0,o.v_)(t.title),1),(0,i.Lk)("div",c,(0,o.v_)(t.artist),1)])))),128))])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",p,[v.error?((0,i.uX)(),(0,i.CE)("div",d,(0,o.v_)(v.error),1)):(0,i.Q3)("",!0),(0,i.Lk)("div",h,[(0,i.Lk)("div",null,[e[6]||(e[6]=(0,i.Lk)("div",{class:"input-label"},"Key:",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>v.key=t),placeholder:"only you would know..."},null,512),[[r.Jo,v.key]])]),(0,i.Lk)("div",null,[e[7]||(e[7]=(0,i.Lk)("div",{class:"input-label"},"Playlist description:",-1)),(0,i.bo)((0,i.Lk)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>v.playlistDescription=t),placeholder:"monkey songs"},null,512),[[r.Jo,v.playlistDescription]])]),(0,i.Lk)("div",null,[e[8]||(e[8]=(0,i.Lk)("div",{class:"input-label"},"Genre:",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>v.genre=t),placeholder:"rock and/or roll"},null,512),[[r.Jo,v.genre]])]),v.isInProgress?((0,i.uX)(),(0,i.CE)("div",y,"Working...")):((0,i.uX)(),(0,i.CE)("div",f,[(0,i.Lk)("button",{onClick:e[3]||(e[3]=(...t)=>k.go&&k.go(...t))},"GO")]))]),e[9]||(e[9]=(0,i.Lk)("hr",null,null,-1)),e[10]||(e[10]=(0,i.Lk)("div",{id:"player-panel"},null,-1))])])}n(1454);const v=n(6425),k=n(4082),w=32,b=126,m=b-w+1;var P={name:"App",components:{},data(){return{playlistDescription:null,genre:null,isInProgress:!1,playlist:null,key:localStorage.encKey,error:null}},methods:{play(t){window.open(`https://www.youtube.com/watch?v=${t}`,"playlister")},onPlayerStateChange(t){t.data===window.YT.PlayerState.ENDED&&console.log("ended")},async go(){if(!this.key)return void(this.error="You must first give me the key!");localStorage.encKey=this.key,this.isInProgress=!0,this.playlist=await this.getPlaylist();const t=this.playlist[0],e=`"${t.title}" by ${t.artist}`,n=await this.searchYouTube(e);this.isInProgress=!1;for(const r of n){this.play(r.id);const t=this.parseIsoDurationSecs(r.contentDetails.duration);console.log("duration",t),await S(2e3)}},async searchYouTube(t,e=16){const n="https://www.googleapis.com/youtube/v3/search",r=this.decrypt(":03Ijt6{+~2.{aeOcwg:&S*[]Ll,IG7Y.+gJi=E",this.key),i=await v.get(n,{params:{part:"snippet",q:t,type:"video",maxResults:e,key:r}}),o=i.data.items.map((t=>t.id.videoId)),a=await v.get("https://www.googleapis.com/youtube/v3/videos",{params:{part:"contentDetails",id:o.join(","),key:r}});return a.data.items||[]},parseIsoDurationSecs(t){const e=t.match(/^PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?$/);if(!e)return"0:00";const[,n,r,i]=e.map((t=>void 0===t?0:parseInt(t,10)));return 3600*n+60*r+i},async getPlaylist(){const t=this.decrypt("lREJxg`ThUyZ1(UUish2#tat<0y;kl,{d[KT~`Hw;SzS]E]3oS$PcI^z\\K^,O]gJ;9",this.key),e=new k({apiKey:t,dangerouslyAllowBrowser:!0}),n=8;let r=`Build a playlist of ${n} tracks. The playlist description is:\n`+this.playlistDescription+"\n";this.genre&&(r+="The genre of the tracks in this list is:\n"+this.genre+"\n"),r+='Output a JSON array where each entry is an object having the attributes "title" and "artist". Produce only JSON, no prefix or suffix.';const i={model:"gpt-4o",messages:[{role:"user",content:r}]},o=await e.chat.completions.create(i),a=o.choices[0].message.content.replace(/^```.*/g,"").replace(/```/g,""),l=JSON.parse(a);return l},wrapToPrintable(t){return w+(t-w+m)%m},encrypt(t,e){let n="";for(let r=0;r<t.length;r++){const i=this.wrapToPrintable(t.charCodeAt(r)),o=r%e.length,a=e.charCodeAt(o),l=this.wrapToPrintable(a)-w,s=this.wrapToPrintable(i+l);n+=String.fromCharCode(s)}return n},decrypt(t,e){let n="";for(let r=0;r<t.length;r++){const i=this.wrapToPrintable(t.charCodeAt(r)),o=r%e.length,a=e.charCodeAt(o),l=this.wrapToPrintable(a)-w,s=this.wrapToPrintable(i-l);n+=String.fromCharCode(s)}return n}},async created(){},mounted(){if(window.YT);else{const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.head.appendChild(t)}}};function S(t){return new Promise((e=>setTimeout(e,t)))}var T=n(1241);const C=(0,T.A)(P,[["render",g]]);var L=C;(0,r.Ef)(L).mount("#app")}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.m=t,function(){var t=[];n.O=function(e,r,i,o){if(!r){var a=1/0;for(c=0;c<t.length;c++){r=t[c][0],i=t[c][1],o=t[c][2];for(var l=!0,s=0;s<r.length;s++)(!1&o||a>=o)&&Object.keys(n.O).every((function(t){return n.O[t](r[s])}))?r.splice(s--,1):(l=!1,o<a&&(a=o));if(l){t.splice(c--,1);var u=i();void 0!==u&&(e=u)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[r,i,o]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var i,o,a=r[0],l=r[1],s=r[2],u=0;if(a.some((function(e){return 0!==t[e]}))){for(i in l)n.o(l,i)&&(n.m[i]=l[i]);if(s)var c=s(n)}for(e&&e(r);u<a.length;u++)o=a[u],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(c)},r=self["webpackChunkplaylister"]=self["webpackChunkplaylister"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[504],(function(){return n(4160)}));r=n.O(r)})();
//# sourceMappingURL=app.60b99624.js.map