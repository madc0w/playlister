{"version":3,"file":"js/app.60b99624.js","mappings":"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","sources":["webpack://playlister/./src/App.vue","webpack://playlister/./src/App.vue?7ccd","webpack://playlister/./src/main.js","webpack://playlister/webpack/bootstrap","webpack://playlister/webpack/runtime/chunk loaded","webpack://playlister/webpack/runtime/compat get default export","webpack://playlister/webpack/runtime/define property getters","webpack://playlister/webpack/runtime/global","webpack://playlister/webpack/runtime/hasOwnProperty shorthand","webpack://playlister/webpack/runtime/make namespace object","webpack://playlister/webpack/runtime/jsonp chunk loading","webpack://playlister/webpack/startup"],"sourcesContent":["<template>\r\n\t<div id=\"app\">\r\n\t\t<div id=\"left-panel\">\r\n\t\t\t<div class=\"header\">Playlist</div>\r\n\t\t\t<hr />\r\n\t\t\t<div id=\"playlist-container\" v-if=\"playlist\">\r\n\t\t\t\t<div v-for=\"(item, i) in playlist\" :key=\"i\">\r\n\t\t\t\t\t<div class=\"track-title\">\r\n\t\t\t\t\t\t{{ item.title }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"track-artist\">\r\n\t\t\t\t\t\t{{ item.artist }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div id=\"right-panel\">\r\n\t\t\t<div id=\"error\" v-if=\"error\">\r\n\t\t\t\t{{ error }}\r\n\t\t\t</div>\r\n\t\t\t<div id=\"input-panel\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div class=\"input-label\">Key:</div>\r\n\t\t\t\t\t<input type=\"text\" v-model=\"key\" placeholder=\"only you would know...\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div class=\"input-label\">Playlist description:</div>\r\n\t\t\t\t\t<textarea v-model=\"playlistDescription\" placeholder=\"monkey songs\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div class=\"input-label\">Genre:</div>\r\n\t\t\t\t\t<input type=\"text\" v-model=\"genre\" placeholder=\"rock and/or roll\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id=\"working-label\" v-if=\"isInProgress\">Working...</div>\r\n\t\t\t\t<div v-else>\r\n\t\t\t\t\t<button @click=\"go\">GO</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<hr />\r\n\t\t\t<div id=\"player-panel\">\r\n\t\t\t\t<!-- <div ref=\"player\"></div> -->\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nconst axios = require('axios');\r\nconst OpenAI = require('openai');\r\n\r\nconst ASCII_START = 32; // Space\r\nconst ASCII_END = 126; // '~'\r\nconst ASCII_RANGE = ASCII_END - ASCII_START + 1; // 95\r\n\r\nexport default {\r\n\tname: 'App',\r\n\r\n\tcomponents: {},\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tplaylistDescription: null,\r\n\t\t\tgenre: null,\r\n\t\t\tisInProgress: false,\r\n\t\t\tplaylist: null,\r\n\t\t\tkey: localStorage.encKey,\r\n\t\t\terror: null,\r\n\t\t};\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tplay(videoId) {\r\n\t\t\twindow.open(`https://www.youtube.com/watch?v=${videoId}`, 'playlister');\r\n\t\t\t// this.player = new window.YT.Player(this.$refs.player, {\r\n\t\t\t// \tvideoId,\r\n\t\t\t// \tplayerVars: {\r\n\t\t\t// \t\tautoplay: 0,\r\n\t\t\t// \t\tcontrols: 1,\r\n\t\t\t// \t},\r\n\t\t\t// \tevents: {\r\n\t\t\t// \t\tonStateChange: this.onPlayerStateChange,\r\n\t\t\t// \t},\r\n\t\t\t// });\r\n\t\t},\r\n\r\n\t\tonPlayerStateChange(event) {\r\n\t\t\tif (event.data === window.YT.PlayerState.ENDED) {\r\n\t\t\t\tconsole.log('ended');\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tasync go() {\r\n\t\t\tif (!this.key) {\r\n\t\t\t\tthis.error = 'You must first give me the key!';\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlocalStorage.encKey = this.key;\r\n\r\n\t\t\tthis.isInProgress = true;\r\n\t\t\tthis.playlist = await this.getPlaylist();\r\n\r\n\t\t\tconst firstEntry = this.playlist[0];\r\n\t\t\tconst query = `\"${firstEntry.title}\" by ${firstEntry.artist}`;\r\n\t\t\tconst videos = await this.searchYouTube(query);\r\n\t\t\tthis.isInProgress = false;\r\n\t\t\t// console.log('videos', videos);\r\n\t\t\tfor (const video of videos) {\r\n\t\t\t\tthis.play(video.id);\r\n\t\t\t\tconst duration = this.parseIsoDurationSecs(video.contentDetails.duration);\r\n\t\t\t\tconsole.log('duration', duration);\r\n\t\t\t\t// await sleep(duration * 1000);\r\n\t\t\t\tawait sleep(2000);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tasync searchYouTube(query, maxResults = 16) {\r\n\t\t\tconst apiUrl = 'https://www.googleapis.com/youtube/v3/search';\r\n\r\n\t\t\tconst key = this.decrypt(':03Ijt6{+~2.{aeOcwg:&S*[]Ll,IG7Y.+gJi=E', this.key);\r\n\t\t\tconst response = await axios.get(apiUrl, {\r\n\t\t\t\tparams: {\r\n\t\t\t\t\tpart: 'snippet',\r\n\t\t\t\t\tq: query,\r\n\t\t\t\t\ttype: 'video',\r\n\t\t\t\t\tmaxResults,\r\n\t\t\t\t\tkey,\r\n\t\t\t\t\t// videoEmbeddable: 'true',  // fail\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\t// Extract video URLs from the response\r\n\t\t\tconst videos = response.data.items.map(item => {\r\n\t\t\t\treturn item.id.videoId;\r\n\t\t\t\t// const videoId = item.id.videoId;\r\n\t\t\t\t// return `https://www.youtube.com/watch?v=${videoId}`;\r\n\t\t\t});\r\n\r\n\t\t\tconst videosResponse = await axios.get('https://www.googleapis.com/youtube/v3/videos', {\r\n\t\t\t\tparams: {\r\n\t\t\t\t\tpart: 'contentDetails',\r\n\t\t\t\t\tid: videos.join(','),\r\n\t\t\t\t\tkey,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\treturn videosResponse.data.items || [];\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Convert an ISO 8601 duration (e.g. \"PT1H2M3S\") into seconds.\r\n\t\t */\r\n\t\tparseIsoDurationSecs(isoDuration) {\r\n\t\t\t// Match patterns like \"PT1H2M3S\", \"PT45M\", \"PT10S\", etc.\r\n\t\t\tconst match = isoDuration.match(/^PT(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+)S)?$/);\r\n\t\t\tif (!match) return '0:00'; // fallback if format is unexpected\r\n\r\n\t\t\tconst [, hours, minutes, seconds] = match.map(v =>\r\n\t\t\t\tv === undefined ? 0 : parseInt(v, 10)\r\n\t\t\t);\r\n\r\n\t\t\treturn hours * 3600 + minutes * 60 + seconds;\r\n\t\t},\r\n\r\n\t\tasync getPlaylist() {\r\n\t\t\tconst key = this.decrypt(\r\n\t\t\t\t'lREJxg`ThUyZ1(UUish2#tat<0y;kl,{d[KT~`Hw;SzS]E]3oS$PcI^z\\\\K^,O]gJ;9',\r\n\t\t\t\tthis.key\r\n\t\t\t);\r\n\t\t\tconst openai = new OpenAI({ apiKey: key, dangerouslyAllowBrowser: true });\r\n\r\n\t\t\tconst numTracks = 8;\r\n\t\t\tlet prompt =\r\n\t\t\t\t`Build a playlist of ${numTracks} tracks. The playlist description is:\\n` +\r\n\t\t\t\tthis.playlistDescription +\r\n\t\t\t\t'\\n';\r\n\t\t\tif (this.genre) {\r\n\t\t\t\tprompt += 'The genre of the tracks in this list is:\\n' + this.genre + '\\n';\r\n\t\t\t}\r\n\t\t\tprompt +=\r\n\t\t\t\t'Output a JSON array where each entry is an object having the attributes \"title\" and \"artist\". Produce only JSON, no prefix or suffix.';\r\n\r\n\t\t\tconst params = {\r\n\t\t\t\tmodel: 'gpt-4o',\r\n\t\t\t\t// user: ,\r\n\t\t\t\tmessages: [\r\n\t\t\t\t\t// {\r\n\t\t\t\t\t// \trole: 'system',\r\n\t\t\t\t\t// \tcontent: 'You are an expert',\r\n\t\t\t\t\t// },\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trole: 'user',\r\n\t\t\t\t\t\tcontent: prompt,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t// response_format: {\r\n\t\t\t\t// \ttype: 'json_schema',\r\n\t\t\t\t// \tjson_schema: {\r\n\t\t\t\t// \t\tname: 'json_response',\r\n\t\t\t\t// \t\tstrict: true,\r\n\t\t\t\t// \t\tschema: {\r\n\t\t\t\t// \t\t\ttype: 'object',\r\n\t\t\t\t// \t\t\tproperties,\r\n\t\t\t\t// \t\t\trequired: Object.keys(properties),\r\n\t\t\t\t// \t\t\tadditionalProperties: false,\r\n\t\t\t\t// \t\t},\r\n\t\t\t\t// \t},\r\n\t\t\t\t// },\r\n\t\t\t};\r\n\r\n\t\t\tconst response = await openai.chat.completions.create(params);\r\n\t\t\tconst jsonStr = response.choices[0].message.content\r\n\t\t\t\t.replace(/^```.*/g, '')\r\n\t\t\t\t.replace(/```/g, '');\r\n\t\t\t// console.log('jsonStr', jsonStr);\r\n\t\t\tconst json = JSON.parse(jsonStr);\r\n\t\t\t// console.log('json', json);\r\n\t\t\treturn json;\r\n\t\t},\r\n\r\n\t\twrapToPrintable(charCode) {\r\n\t\t\t// Shift so that ASCII_START becomes 0,\r\n\t\t\t// then wrap with modulo, then shift back\r\n\t\t\treturn ASCII_START + ((charCode - ASCII_START + ASCII_RANGE) % ASCII_RANGE);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Encrypts a string with a rotating key such that all output characters\r\n\t\t * remain in the printable ASCII range [32..126].\r\n\t\t *\r\n\t\t * For each character in plaintext:\r\n\t\t * - Convert it to 0-based index by subtracting 32.\r\n\t\t * - Convert key character similarly, then combine (add).\r\n\t\t * - Wrap with modulo 95, shift back into ASCII range.\r\n\t\t */\r\n\t\tencrypt(plaintext, key) {\r\n\t\t\tlet encrypted = '';\r\n\t\t\tfor (let i = 0; i < plaintext.length; i++) {\r\n\t\t\t\t// Current plaintext character\r\n\t\t\t\tconst ptCharCode = this.wrapToPrintable(plaintext.charCodeAt(i));\r\n\t\t\t\t// Current key character, rotating through key\r\n\t\t\t\tconst keyIndex = i % key.length;\r\n\t\t\t\tconst keyShiftRaw = key.charCodeAt(keyIndex);\r\n\t\t\t\t// Also wrap the key character to keep it in [32..126]\r\n\t\t\t\tconst keyShift = this.wrapToPrintable(keyShiftRaw) - ASCII_START;\r\n\r\n\t\t\t\t// Now shift plaintext by the key\r\n\t\t\t\tconst newChar = this.wrapToPrintable(ptCharCode + keyShift);\r\n\t\t\t\tencrypted += String.fromCharCode(newChar);\r\n\t\t\t}\r\n\t\t\treturn encrypted;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Decrypts the string by reversing the rotating-key shifts.\r\n\t\t */\r\n\t\tdecrypt(ciphertext, key) {\r\n\t\t\tlet decrypted = '';\r\n\t\t\tfor (let i = 0; i < ciphertext.length; i++) {\r\n\t\t\t\tconst ctCharCode = this.wrapToPrintable(ciphertext.charCodeAt(i));\r\n\t\t\t\tconst keyIndex = i % key.length;\r\n\t\t\t\tconst keyShiftRaw = key.charCodeAt(keyIndex);\r\n\t\t\t\tconst keyShift = this.wrapToPrintable(keyShiftRaw) - ASCII_START;\r\n\r\n\t\t\t\t// Reverse the shift that was done in encryption\r\n\t\t\t\tconst originalChar = this.wrapToPrintable(ctCharCode - keyShift);\r\n\t\t\t\tdecrypted += String.fromCharCode(originalChar);\r\n\t\t\t}\r\n\t\t\treturn decrypted;\r\n\t\t},\r\n\t},\r\n\r\n\tasync created() {\r\n\t\t// const enc = this.encrypt('some API key', this.key);\r\n\t\t// console.log('encrypted', enc);\r\n\t\t// console.log('decrypted', this.decrypt(enc, this.key));\r\n\t},\r\n\r\n\tmounted() {\r\n\t\t// If the YouTube IFrame API is not yet loaded, load it asynchronously.\r\n\t\t// Once it finishes loading, it calls `window.onYouTubeIframeAPIReady`,\r\n\t\t// which we set to our `initializePlayer` method.\r\n\t\tif (window.YT) {\r\n\t\t\t// If already loaded, just initialize immediately\r\n\t\t\t// this.initializePlayer();\r\n\t\t} else {\r\n\t\t\tconst tag = document.createElement('script');\r\n\t\t\ttag.src = 'https://www.youtube.com/iframe_api';\r\n\r\n\t\t\t// window.onYouTubeIframeAPIReady = this.initializePlayer;\r\n\t\t\tdocument.head.appendChild(tag);\r\n\t\t}\r\n\r\n\t\t// this.play('DCpmJHFMNRI');\r\n\t\t// this.play('8-61YbIwFx8');\r\n\t},\r\n};\r\n\r\nfunction sleep(ms) {\r\n\treturn new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n</script>\r\n\r\n<style>\r\n#app {\r\n\tfont-family: Avenir, Helvetica, Arial, sans-serif;\r\n\t-webkit-font-smoothing: antialiased;\r\n\t-moz-osx-font-smoothing: grayscale;\r\n\tcolor: #2c3e50;\r\n\tdisplay: flex; /* Use flex layout */\r\n\tmin-height: 100vh; /* Optional: make container fill at least the viewport height */\r\n}\r\n\r\n#left-panel {\r\n\twidth: 400px;\r\n\tbackground-color: #f2f2f2;\r\n\tpadding: 1rem;\r\n}\r\n\r\n#right-panel {\r\n\tflex-grow: 1; /* Take remaining space */\r\n\tbackground-color: #ffffff;\r\n\tpadding: 1rem;\r\n}\r\n\r\n#input-panel textarea {\r\n\twidth: 400px;\r\n}\r\n\r\n#input-panel input {\r\n\twidth: 400px;\r\n}\r\n\r\n.track-artist {\r\n\tmargin-left: 18px;\r\n\tfont-size: small;\r\n\tmargin-bottom: 8px;\r\n}\r\n\r\n#error {\r\n\tcolor: red;\r\n\tbackground-color: darkgray;\r\n\tborder-radius: 8px;\r\n\tmargin: 12px;\r\n}\r\n\r\n#working-label {\r\n\tmargin-top: 12px;\r\n}\r\n\r\n.input-label {\r\n\tfont-weight: bold;\r\n\tmargin-top: 8px;\r\n}\r\n\r\nbutton {\r\n\tbackground-color: crimson;\r\n\tcolor: white;\r\n\tmin-width: 80px;\r\n\tmin-height: 24px;\r\n\tmargin-top: 12px;\r\n\tborder-radius: 6px;\r\n\tcursor: pointer;\r\n}\r\n</style>\r\n","import { render } from \"./App.vue?vue&type=template&id=00cd6f36\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=00cd6f36&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\n\r\ncreateApp(App).mount('#app')\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkplaylister\"] = self[\"webpackChunkplaylister\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(4160); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["id","key","class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","$data","playlist","_hoisted_3","_Fragment","_renderList","item","i","_hoisted_4","_toDisplayString","title","_hoisted_5","artist","_createCommentVNode","_hoisted_6","error","_hoisted_7","_hoisted_8","type","_cache","$event","placeholder","playlistDescription","genre","isInProgress","_hoisted_9","_hoisted_10","onClick","args","$options","go","axios","require","OpenAI","ASCII_START","ASCII_END","ASCII_RANGE","name","components","data","localStorage","encKey","methods","play","videoId","window","open","onPlayerStateChange","event","YT","PlayerState","ENDED","console","log","this","getPlaylist","firstEntry","query","videos","searchYouTube","video","duration","parseIsoDurationSecs","contentDetails","sleep","maxResults","apiUrl","decrypt","response","get","params","part","q","items","map","videosResponse","join","isoDuration","match","hours","minutes","seconds","v","undefined","parseInt","openai","apiKey","dangerouslyAllowBrowser","numTracks","prompt","model","messages","role","content","chat","completions","create","jsonStr","choices","message","replace","json","JSON","parse","wrapToPrintable","charCode","encrypt","plaintext","encrypted","length","ptCharCode","charCodeAt","keyIndex","keyShiftRaw","keyShift","newChar","String","fromCharCode","ciphertext","decrypted","ctCharCode","originalChar","created","mounted","tag","document","createElement","src","head","appendChild","ms","Promise","resolve","setTimeout","__exports__","render","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","keys","every","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","g","globalThis","Function","e","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","value","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","forEach","bind","push","__webpack_exports__"],"sourceRoot":""}